# 베스트클라이밍 웹사이트 기획안

## 1. 프로젝트 개요

| 항목 | 내용 |
|------|------|
| 프로젝트명 | 베스트클라이밍 웹사이트 |
| 기술 스택 | Next.js, Supabase |
| 대상 | 클라이밍장 회원 및 관리자 |

---

## 2. 기능 목록

### 2.1 메인화면
| 번호 | 기능명 | 설명 |
|------|--------|------|
| 1 | 오늘의 완등자 | 당일 완등한 회원 목록 (최대 3명, 난이도 높은 순) |
| 2 | 주간 완등자 | 주간 완등한 회원 목록 (최대 3명, 난이도 높은 순) |

### 2.2 관리자화면
| 번호 | 기능명 | 설명 |
|------|--------|------|
| 1 | 회원관리 | 회원 정보 CRUD |
| 2 | 암벽문제관리 | 루트(암벽문제) CRUD |
| 3 | 출석관리 | 출석 여부·일자 관리 |
| 4 | 일일체험예약자관리 | 예약중 → 예약완료 플래그 변경 |

### 2.3 사용자화면
| 번호 | 기능명 | 설명 |
|------|--------|------|
| 1 | 회원정보조회 | 본인 정보 조회 |
| 2 | 나의운동일지관리 | 운동일지 등록·수정·삭제 |
| 3 | 운동일지조회 | 본인 운동일지 목록·상세 조회 |
| 4 | 회원가입 | QR 스캔 후 가입 (이름, 이메일(선택), 전화번호) |
| 5 | 일일체험예약 | 비회원 일일체험 예약 |

### 2.4 공통화면
| 번호 | 기능명 | 설명 |
|------|--------|------|
| 1 | 자유게시판 목록 | 작성자, 제목, 작성일자 목록 |
| 2 | 자유게시판 상세 | 제목, 본문, 작성자, 작성일자 |
| 3 | 공지사항 | 공지 목록·상세 |
| 4 | 출석체크 | 전화번호 뒷 4자리로 출석 처리 |
| 5 | 사진첩 | 등록 및 조회 (제목, 본문, 사진) |
| 6 | 통계 | 운동일지 기반 통계 5종 |

---

## 3. 화면 정의서

### 3.1 메인화면

#### 오늘의 완등자 / 주간 완등자
| 표시 항목 | 설명 | 비고 |
|-----------|------|------|
| 암벽구분값 | 직벽, 약오버벽, 오버벽, 극오버 | |
| 루트명 | 암벽문제명 | |
| 난이도 | 5.9, 10, 11, 12, 13 + a,b,c,d | |
| 회원명 | 완등한 회원 이름 | |
| 표시 수 | 최대 3명 | 난이도 높을수록 상위 노출 |

---

### 3.2 관리자화면

#### 회원관리
| 항목 | 타입 | 비고 |
|------|------|------|
| 성명 | 텍스트 | |
| 이메일 | 이메일 | |
| 전화번호 | 텍스트 | |
| 전화번호 뒷 4자리 | 텍스트(4자리) | 출석체크용 |
| 회원권 시작일자 | 날짜 | |
| 회원권 종료일자 | 날짜 | |

#### 암벽문제관리
| 항목 | 타입 | 비고 |
|------|------|------|
| 암벽구분값 | 선택 | 직벽, 약오버벽, 오버벽, 극오버 |
| 난이도구분값 | 선택 | 5.9, 10, 11, 12, 13 |
| 난이도구분상세값 | 선택 | a, b, c, d |
| 루트명 | 텍스트 | |
| 홀드수 | 숫자 | |

#### 출석관리
| 항목 | 타입 | 비고 |
|------|------|------|
| 회원명 | 텍스트 | |
| 출석여부 | Y/N | |
| 출석일자 | 날짜 | |

#### 일일체험예약자관리
| 동작 | 설명 |
|------|------|
| 조회 | 예약중(플래그) 목록 조회 |
| 처리 | 예약중 → 예약완료(플래그)로 변경 |

---

### 3.3 사용자화면

#### 회원정보조회
| 항목 | 타입 |
|------|------|
| 성명 | 텍스트 |
| 이메일 | 이메일 |
| 전화번호 | 텍스트 |

#### 나의운동일지관리 / 운동일지조회
| 항목 | 타입 | 비고 |
|------|------|------|
| 사용자명 | 텍스트 | 조회 시 |
| 암벽구분값 | 선택 | 직벽, 약오버벽, 오버벽, 극오버 |
| 난이도 | 텍스트 | 난이도구분값 + 난이도구분상세값 (예: 11a) |
| 루트명 | 텍스트 | |
| 홀드수 | 숫자 | |
| 진행한 홀드수 | 숫자 | |
| 등반횟수 | 숫자 | |
| 완등여부 | Y/N | |
| 왕복여부 | Y/N | |
| 왕복횟수 | 숫자 | |

#### 회원가입화면 (QR 진입)
| 항목 | 타입 | 필수 |
|------|------|------|
| 이름 | 텍스트 | O |
| 이메일 | 이메일 | X |
| 전화번호 | 텍스트 | O |

#### 일일체험예약화면
| 항목 | 타입 | 비고 |
|------|------|------|
| 성명 | 텍스트 | |
| 입금자명 | 텍스트 | |
| 예약일시 | 날짜·시간 | |
| 인원수 | 숫자 | |
| 상태 | 플래그 | 예약중 → 관리자 확인 후 예약완료 |

---

### 3.4 공통화면

#### 자유게시판 목록
| 항목 | 타입 |
|------|------|
| 작성자명 | 텍스트 |
| 제목 | 텍스트 |
| 작성일자 | 날짜 |

#### 자유게시판 상세
| 항목 | 타입 |
|------|------|
| 작성자명 | 텍스트 |
| 제목 | 텍스트 |
| 작성일자 | 날짜 |
| 본문내용 | 본문 |

#### 공지사항
| 항목 | 타입 |
|------|------|
| 작성자명 | 텍스트 |
| 제목 | 텍스트 |
| 작성일자 | 날짜 |
| 본문내용 | 본문 |

#### 출석체크
| 항목 | 설명 |
|------|------|
| UI | 키패드 화면 |
| 입력 | 전화번호 뒷 4자리 |
| 동작 | 입력 시 출석체크 완료 처리 |

#### 사진첩 등록·조회
| 항목 | 타입 |
|------|------|
| 작성자명 | 텍스트 |
| 제목 | 텍스트 |
| 작성일자 | 날짜 |
| 본문내용 | 본문 |
| 사진이미지 | 이미지(복수 가능) |

#### 통계화면
| 번호 | 통계 항목 | 기준 |
|------|-----------|------|
| 1 | 회원별 운동일지에 등록한 루트 통계 | 운동일지 |
| 2 | 루트별 평균 진행한 홀드수 통계 | 운동일지 |
| 3 | 루트별 완등 통계 | 운동일지 |
| 4 | 기간별 운동일지에 등록한 루트 통계 | 기간 + 운동일지 |
| 5 | 기간별 완등 통계 | 기간 + 완등여부 |

---

## 4. 데이터베이스 설계 (Supabase)

### 4.1 테이블 목록

| 테이블명 | 설명 |
|----------|------|
| profiles | 회원 프로필 (auth.users 연동) |
| routes | 암벽문제(루트) 마스터 |
| exercise_logs | 운동일지 |
| attendances | 출석 |
| daily_reservations | 일일체험 예약 |
| free_board_posts | 자유게시판 게시글 |
| notices | 공지사항 |
| photo_album_posts | 사진첩 게시글 |

### 4.2 ERD 개요

```
profiles (회원)
  - id (uuid, auth.users.id)
  - name, email, phone, phone_tail4
  - membership_start, membership_end
  - role (member | admin)

routes (암벽문제)
  - wall_type: 직벽|약오버벽|오버벽|극오버
  - grade_value: 5.9|10|11|12|13
  - grade_detail: a|b|c|d
  - name (루트명), hold_count

exercise_logs (운동일지)
  - profile_id → profiles
  - route_id → routes
  - progress_hold_count, attempt_count
  - is_completed, is_round_trip, round_trip_count
  - logged_at

attendances (출석)
  - profile_id → profiles
  - attended_at, checked_at

daily_reservations (일일체험예약)
  - guest_name, depositor_name, reserved_at, guest_count
  - status: pending | confirmed

free_board_posts, notices, photo_album_posts
  - author_id, title, body, created_at
  - (사진첩: images 배열 또는 별도 테이블)
```

### 4.3 코드값 정의

#### 암벽구분 (wall_type)
- `vertical` : 직벽
- `slight_overhang` : 약오버벽
- `overhang` : 오버벽
- `extreme_overhang` : 극오버

#### 난이도구분값 (grade_value)
- `5.9`, `10`, `11`, `12`, `13`

#### 난이도구분상세 (grade_detail)
- `a`, `b`, `c`, `d`

#### 예약상태 (reservation status)
- `pending` : 예약중
- `confirmed` : 예약완료

---

## 5. 라우팅 구조 (Next.js)

```
/                     # 메인 (오늘/주간 완등자)
/login                # 로그인

# 사용자
/member               # 회원정보 조회
/member/register      # 회원가입 (QR)
/exercise             # 나의 운동일지 목록/관리
/exercise/[id]        # 운동일지 상세
/reservation          # 일일체험 예약

# 공통
/board                # 자유게시판 목록
/board/[id]           # 자유게시판 상세
/notice               # 공지사항 목록
/notice/[id]          # 공지사항 상세
/attendance           # 출석체크 (키패드)
/gallery              # 사진첩 목록
/gallery/[id]         # 사진첩 상세
/statistics           # 통계

# 관리자
/admin                # 관리자 홈
/admin/members        # 회원관리
/admin/routes         # 암벽문제관리
/admin/attendance     # 출석관리
/admin/reservations   # 일일체험예약자관리
```

---

## 6. 인증·권한

| 구분 | 인증 | 권한 |
|------|------|------|
| 메인, 공지, 자유게시판, 사진첩, 공지사항 | 비로그인 가능 | 읽기 공개 |
| 출석체크, 운동일지, 회원정보 | 로그인 필수 | 본인만 |
| 일일체험예약, 회원가입 | 비회원 가능 | - |
| 관리자 화면 전부 | 로그인 + role=admin | 관리자만 |

---

## 7. 개발 우선순위 제안

1. **Phase 1** : Supabase 프로젝트 생성, 테이블·RLS 정책, Next.js 초기 설정
2. **Phase 2** : 회원가입/로그인, 프로필, 회원정보조회, 관리자 회원관리
3. **Phase 3** : 암벽문제(루트) CRUD, 운동일지 CRUD, 메인 완등자 노출
4. **Phase 4** : 출석체크·출석관리, 일일체험예약·예약관리
5. **Phase 5** : 자유게시판, 공지사항, 사진첩
6. **Phase 6** : 통계 화면, UI/UX 정리

---

*문서 버전: 1.0 | 최종 수정: 2025-01-30*
